{"ast":null,"code":"import axios from \"axios\";\nimport { store } from \"../store\";\nimport config from \"../config\";\nimport authHeader from \"./auth-header\";\nconst API_URL = config.API_URL;\n\nconst create = values => {\n  const auth = store.getState().auth;\n  const auth_key = auth.user.auth_key;\n  const formData = new FormData();\n\n  for (let value in values) {\n    if ([\"gender\"].includes(value) && values[value] && typeof values[value] === \"object\") {\n      formData.append(value, values[value].value);\n    } else {\n      formData.append(value, values[value]);\n    }\n  }\n\n  const action = \"afterlogin/products/store\";\n  formData.append(\"auth_key\", auth_key);\n  formData.append(\"action\", action);\n  formData.append(\"role_id\", 6);\n  formData.append(\"salon_id\", auth.user.salon_id);\n  return axios.post(API_URL + action, formData, {\n    headers: authHeader({\n      contentType: \"multipart/form-data\"\n    })\n  });\n};\n\nconst update = values => {\n  const auth = store.getState().auth;\n  const auth_key = auth.user.auth_key;\n  const formData = new FormData();\n\n  for (let value in values) {\n    if ([\"gender\"].includes(value) && values[value] && typeof values[value] === \"object\") {\n      formData.append(value, values[value].value);\n    } else {\n      formData.append(value, values[value] === null ? '' : values[value]);\n    }\n  }\n\n  const action = \"afterlogin/products/update/\" + values.id;\n  formData.append(\"auth_key\", auth_key);\n  formData.append(\"action\", action);\n  formData.append(\"role_id\", 6);\n  formData.append(\"salon_id\", auth.user.salon_id);\n  return axios.post(API_URL + action, formData, {\n    headers: authHeader({\n      contentType: \"multipart/form-data\"\n    })\n  });\n};\n\nconst view = values => {\n  const auth = store.getState().auth;\n  const auth_key = auth.user.auth_key;\n  const sort = values && values.sort;\n  const page = values && values.page;\n  const next_page_url = values && values.next_page_url;\n  const result = values && values.result ? values.result : '';\n  let sortstring = \"\";\n\n  if (sort) {\n    let sortArray = [];\n    let sortSubArray = [];\n    Object.keys(sort).map(function (key, index) {\n      if (Object.keys(sort[key]).length > 0) {\n        Object.keys(sort[key]).map(function (subkey, subindex) {\n          sortSubArray[subindex] = `sort[${key}][${subkey}]=${sort[key][subkey]}`;\n        });\n      }\n\n      if (key != 'supplier') {\n        sortArray[index] = `sort[${key}]=${sort[key]}`;\n      }\n    });\n\n    if (sortSubArray.length > 0) {\n      let jsubsort = sortSubArray.join(\"&\");\n      sortstring = jsubsort;\n    }\n\n    if (sortArray.length > 0) {\n      let jsort = sortArray.join(\"&\");\n      sortstring = jsort;\n    }\n  }\n\n  const action = page ? `afterlogin/products/view?page=${page}&${sortstring}` : `afterlogin/products/view?${sortstring}`;\n  const data = {\n    auth_key: auth_key,\n    action: action,\n    salon_id: auth.user.salon_id,\n    pagination: values && values.id ? false : true,\n    //true or false\n    id: values && values.id ? values.id : \"\",\n    field: values && values.id ? \"\" : \"name,image,sku,description,cost_price,retail_price,stock_quantity\",\n    // first_name,last_name,email\n    salon_field: false,\n    //business_name,owner_name\n    supplier_field: 'name',\n    //business_name,owner_name\n    tax_field: 'name',\n    //business_name,owner_name\n    result: result //business_name,owner_name\n\n  };\n  return axios.post(next_page_url ? `${next_page_url}&${sortstring}` : API_URL + action, data, {\n    headers: authHeader()\n  });\n};\n\nconst deleted = values => {\n  const auth = store.getState().auth;\n  const auth_key = auth.user.auth_key;\n  const action = `afterlogin/products/delete/${values.id}`;\n  const data = {\n    auth_key: auth_key,\n    action: action\n  };\n  return axios.post(API_URL + action, data, {\n    headers: authHeader()\n  });\n};\n\nconst suggetionlist = values => {\n  const auth = store.getState().auth;\n  const auth_key = auth.user.auth_key;\n  const page = values && values.page;\n  const next_page_url = values && values.next_page_url;\n  let q = values && values.q ? values.q : \"\";\n  const action = page ? `afterlogin/products/view?page=${page}&q=${q}` : `afterlogin/products/view?q=${q}`;\n  const data = {\n    auth_key: auth_key,\n    action: action,\n    salon_id: auth.user.salon_id,\n    pagination: true,\n    //true or false\n    id: values && values.id ? values.id : \"\",\n    field: values && values.id ? \"\" : \"name,image,sku,description,cost_price,retail_price,stock_quantity\",\n    // first_name,last_name,email\n    salon_field: false //business_name,owner_name\n\n  };\n  return axios.post(next_page_url ? `${next_page_url}&q=${q}` : API_URL + action, data, {\n    headers: authHeader()\n  });\n};\n\nconst productApiController = {\n  create,\n  update,\n  view,\n  deleted,\n  suggetionlist\n};\nexport default productApiController;","map":{"version":3,"sources":["/opt/lampp/htdocs/git/salonreact/src/services/product.service.js"],"names":["axios","store","config","authHeader","API_URL","create","values","auth","getState","auth_key","user","formData","FormData","value","includes","append","action","salon_id","post","headers","contentType","update","id","view","sort","page","next_page_url","result","sortstring","sortArray","sortSubArray","Object","keys","map","key","index","length","subkey","subindex","jsubsort","join","jsort","data","pagination","field","salon_field","supplier_field","tax_field","deleted","suggetionlist","q","productApiController"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { store } from \"../store\";\nimport config from \"../config\";\nimport authHeader from \"./auth-header\";\n\nconst API_URL = config.API_URL;\n\nconst create = (values) => {\n  const auth = store.getState().auth;\n  const auth_key = auth.user.auth_key;\n  const formData = new FormData();\n  for (let value in values) {\n    if ([\"gender\"].includes(value) && values[value] && typeof values[value] === \"object\") {\n      formData.append(value, values[value].value);\n    } else {\n      formData.append(value, values[value]);\n    }\n  }\n  const action = \"afterlogin/products/store\";\n  formData.append(\"auth_key\", auth_key);\n  formData.append(\"action\", action);\n  formData.append(\"role_id\", 6);\n  formData.append(\"salon_id\", auth.user.salon_id);\n  return axios.post(API_URL + action, formData, { headers: authHeader({ contentType: \"multipart/form-data\" }) });\n};\n\nconst update = (values) => {\n  const auth = store.getState().auth;\n  const auth_key = auth.user.auth_key;\n  const formData = new FormData();\n  for (let value in values) {\n    if ([\"gender\"].includes(value) && values[value] && typeof values[value] === \"object\") {\n      formData.append(value, values[value].value);\n    } else {\n      formData.append(value, values[value] === null ? '' : values[value]);\n    }\n  }\n  const action = \"afterlogin/products/update/\" + values.id;\n  formData.append(\"auth_key\", auth_key);\n  formData.append(\"action\", action);\n  formData.append(\"role_id\", 6);\n  formData.append(\"salon_id\", auth.user.salon_id);\n  return axios.post(API_URL + action, formData, { headers: authHeader({ contentType: \"multipart/form-data\" }) });\n};\n\nconst view = (values) => {\n  const auth = store.getState().auth;\n  const auth_key = auth.user.auth_key;\n  const sort = values && values.sort;\n  const page = values && values.page;\n  const next_page_url = values && values.next_page_url;\n  const result = values && values.result ? values.result : '';\n  let sortstring = \"\";\n  if (sort) {\n    let sortArray = [];\n    let sortSubArray = [];\n    Object.keys(sort).map(function (key, index) {\n      if (Object.keys(sort[key]).length > 0) {\n        Object.keys(sort[key]).map(function (subkey, subindex) {\n          sortSubArray[subindex] = `sort[${key}][${subkey}]=${sort[key][subkey]}`;\n        });\n      }\n      if(key != 'supplier'){\n        sortArray[index] = `sort[${key}]=${sort[key]}`;\n      }\n    });\n    if (sortSubArray.length > 0) {\n      let jsubsort = sortSubArray.join(\"&\");\n      sortstring = jsubsort;\n    } \n    if (sortArray.length > 0) {\n      let jsort = sortArray.join(\"&\");\n      sortstring = jsort;\n    }\n  }\n  const action = page ? `afterlogin/products/view?page=${page}&${sortstring}` : `afterlogin/products/view?${sortstring}`;\n  const data = {\n    auth_key: auth_key,\n    action: action,\n    salon_id: auth.user.salon_id,\n    pagination: values && values.id ? false : true, //true or false\n    id: values && values.id ? values.id : \"\",\n    field: values && values.id ? \"\" : \"name,image,sku,description,cost_price,retail_price,stock_quantity\", // first_name,last_name,email\n    salon_field: false, //business_name,owner_name\n    supplier_field: 'name', //business_name,owner_name\n    tax_field: 'name', //business_name,owner_name\n    result: result, //business_name,owner_name\n  };\n  return axios.post(next_page_url ? `${next_page_url}&${sortstring}` : API_URL + action, data, { headers: authHeader() });\n};\n\nconst deleted = (values) => {\n  const auth = store.getState().auth;\n  const auth_key = auth.user.auth_key;\n  const action = `afterlogin/products/delete/${values.id}`;\n  const data = {\n    auth_key: auth_key,\n    action: action,\n  };\n  return axios.post(API_URL + action, data, { headers: authHeader() });\n};\n\nconst suggetionlist = (values) => {\n  const auth = store.getState().auth;\n  const auth_key = auth.user.auth_key;\n  const page = values && values.page;\n  const next_page_url = values && values.next_page_url;\n  let q = values && values.q ? values.q : \"\";\n  const action = page ? `afterlogin/products/view?page=${page}&q=${q}` : `afterlogin/products/view?q=${q}`;\n  const data = {\n    auth_key: auth_key,\n    action: action,\n    salon_id: auth.user.salon_id,\n    pagination: true, //true or false\n    id: values && values.id ? values.id : \"\",\n    field: values && values.id ? \"\" : \"name,image,sku,description,cost_price,retail_price,stock_quantity\", // first_name,last_name,email\n    salon_field: false, //business_name,owner_name\n  };\n  return axios.post(next_page_url ? `${next_page_url}&q=${q}` : API_URL + action, data, { headers: authHeader() });\n};\n\nconst productApiController = {\n  create,\n  update,\n  view,\n  deleted,\n  suggetionlist,\n};\nexport default productApiController;\n"]},"metadata":{},"sourceType":"module"}